<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: GObject::GValue
  
    &mdash; Documentation by YARD 0.9.25
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "GObject::GValue";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (G)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span>
     &raquo; 
    <span class="title">GValue</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: GObject::GValue
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">FFI::ManagedStruct</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">FFI::ManagedStruct</li>
          
            <li class="next">GObject::GValue</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/vips/gvalue.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Represent a GValue. Example use:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gvalue'>gvalue</span> <span class='op'>=</span> <span class='const'>GValue</span><span class='op'>::</span><span class='id identifier rubyid_alloc'><span class='object_link'><a href="#alloc-class_method" title="GObject::GValue.alloc (method)">alloc</a></span></span>
<span class='id identifier rubyid_gvalue'>gvalue</span><span class='period'>.</span><span class='id identifier rubyid_init'>init</span> <span class='const'><span class='object_link'><a href="GObject.html" title="GObject::GObject (class)">GObject</a></span></span><span class='op'>::</span><span class='const'>GDOUBLE_TYPE</span>
<span class='id identifier rubyid_gvalue'>gvalue</span><span class='period'>.</span><span class='id identifier rubyid_set'>set</span> <span class='float'>3.1415</span>
<span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_gvalue'>gvalue</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span>
<span class='comment'># optional -- drop any ref the gvalue had
</span><span class='id identifier rubyid_gvalue'>gvalue</span><span class='period'>.</span><span class='id identifier rubyid_unset'>unset</span>
</code></pre>

<p>Lifetime is managed automatically. It doesn&#39;t know about all GType values, but it does know the ones that libvips uses.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#alloc-class_method" title="alloc (class method)">.<strong>alloc</strong>  &#x21d2; GValue </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Allocate memory for a GValue and return a class wrapper.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#from_nick-class_method" title="from_nick (class method)">.<strong>from_nick</strong>(gtype, value)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>convert an enum value (str/symb/int) into an int ready for libvips.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#release-class_method" title="release (class method)">.<strong>release</strong>(ptr)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_nick-class_method" title="to_nick (class method)">.<strong>to_nick</strong>(gtype, enum_value)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>convert an int enum back into a symbol.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get-instance_method" title="#get (instance method)">#<strong>get</strong>  &#x21d2; Any </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the value of a GValue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#init-instance_method" title="#init (instance method)">#<strong>init</strong>(gtype)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set the type of thing a gvalue can hold.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set-instance_method" title="#set (instance method)">#<strong>set</strong>(value)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set the value of a GValue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unset-instance_method" title="#unset (instance method)">#<strong>unset</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Clear the thing held by a GValue.</p>
</div></span>
  
</li>

      
    </ul>
  


  

  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="alloc-class_method">
  
    .<strong>alloc</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="GObject::GValue (class)">GValue</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Allocate memory for a GValue and return a class wrapper. Memory will be freed automatically when it goes out of scope. The GValue is inited to 0, use <span class='object_link'><a href="#init-instance_method" title="GObject::GValue#init (method)">#init</a></span> to set a type.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="GObject::GValue (class)">GValue</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a new gvalue set to 0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


63
64
65
66
67
68
69
70
71
72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/vips/gvalue.rb', line 63</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_alloc'>alloc</span>
  <span class='comment'># allocate memory
</span>  <span class='id identifier rubyid_memory'>memory</span> <span class='op'>=</span> <span class='const'>FFI</span><span class='op'>::</span><span class='const'>MemoryPointer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='const'><span class='object_link'><a href="" title="GObject::GValue (class)">GValue</a></span></span>

  <span class='comment'># make this alloc autorelease ... we mustn&#39;t release in
</span>  <span class='comment'># GValue::release, since we are used to wrap GValue pointers
</span>  <span class='comment'># made by other people
</span>  <span class='id identifier rubyid_pointer'>pointer</span> <span class='op'>=</span> <span class='const'>FFI</span><span class='op'>::</span><span class='const'>Pointer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='const'><span class='object_link'><a href="" title="GObject::GValue (class)">GValue</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_memory'>memory</span>

  <span class='comment'># ... and wrap in a GValue
</span>  <span class='const'><span class='object_link'><a href="" title="GObject::GValue (class)">GValue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_pointer'>pointer</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="from_nick-class_method">
  
    .<strong>from_nick</strong>(gtype, value)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>convert an enum value (str/symb/int) into an int ready for libvips</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


28
29
30
31
32
33
34
35
36
37
38
39
40
41</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/vips/gvalue.rb', line 28</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_from_nick'>from_nick</span><span class='lparen'>(</span><span class='id identifier rubyid_gtype'>gtype</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>Symbol</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>String</span>
    <span class='comment'># libvips expects &quot;-&quot; as a separator in enum names, but &quot;_&quot; is more
</span>    <span class='comment'># convenient for ruby, eg. :b_w
</span>    <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='period'>.</span><span class='id identifier rubyid_vips_enum_from_nick'>vips_enum_from_nick</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ruby-vips</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_gtype'>gtype</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_tr'>tr</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>==</span> <span class='op'>-</span><span class='int'>1</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips/Error.html" title="Vips::Error (class)">Error</a></span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_value'>value</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="release-class_method">
  
    .<strong>release</strong>(ptr)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


53
54
55
56</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/vips/gvalue.rb', line 53</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_release'>release</span> <span class='id identifier rubyid_ptr'>ptr</span>
  <span class='comment'># GLib::logger.debug(&quot;GObject::GValue::release&quot;) {&quot;ptr = #{ptr}&quot;}
</span>  <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_value_unset'>g_value_unset</span> <span class='id identifier rubyid_ptr'>ptr</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_nick-class_method">
  
    .<strong>to_nick</strong>(gtype, enum_value)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>convert an int enum back into a symbol</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


44
45
46
47
48
49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/vips/gvalue.rb', line 44</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_to_nick'>to_nick</span><span class='lparen'>(</span><span class='id identifier rubyid_gtype'>gtype</span><span class='comma'>,</span> <span class='id identifier rubyid_enum_value'>enum_value</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_enum_name'>enum_name</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='period'>.</span><span class='id identifier rubyid_vips_enum_nick'>vips_enum_nick</span> <span class='id identifier rubyid_gtype'>gtype</span><span class='comma'>,</span> <span class='id identifier rubyid_enum_value'>enum_value</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_enum_name'>enum_name</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips/Error.html" title="Vips::Error (class)">Error</a></span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_enum_name'>enum_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="get-instance_method">
  
    #<strong>get</strong>  &#x21d2; <tt>Any</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the value of a GValue. The value is converted to a Ruby type in the obvious way.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Any</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the value held by the GValue</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/vips/gvalue.rb', line 171</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get'>get</span>
  <span class='id identifier rubyid_gtype'>gtype</span> <span class='op'>=</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:gtype</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_fundamental'>fundamental</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_type_fundamental'>g_type_fundamental</span> <span class='id identifier rubyid_gtype'>gtype</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='kw'>case</span> <span class='id identifier rubyid_gtype'>gtype</span>
  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../GObject.html#GBOOL_TYPE-constant" title="GObject::GBOOL_TYPE (constant)">GBOOL_TYPE</a></span></span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_value_get_boolean'>g_value_get_boolean</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span> <span class='op'>!=</span> <span class='int'>0</span>

  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../GObject.html#GINT_TYPE-constant" title="GObject::GINT_TYPE (constant)">GINT_TYPE</a></span></span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_value_get_int'>g_value_get_int</span> <span class='kw'>self</span>

  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../GObject.html#GUINT64_TYPE-constant" title="GObject::GUINT64_TYPE (constant)">GUINT64_TYPE</a></span></span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_value_get_uint64'>g_value_get_uint64</span> <span class='kw'>self</span>

  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../GObject.html#GDOUBLE_TYPE-constant" title="GObject::GDOUBLE_TYPE (constant)">GDOUBLE_TYPE</a></span></span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_value_get_double'>g_value_get_double</span> <span class='kw'>self</span>

  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../GObject.html#GSTR_TYPE-constant" title="GObject::GSTR_TYPE (constant)">GSTR_TYPE</a></span></span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_value_get_string'>g_value_get_string</span> <span class='kw'>self</span>

  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips.html#REFSTR_TYPE-constant" title="Vips::REFSTR_TYPE (constant)">REFSTR_TYPE</a></span></span>
    <span class='id identifier rubyid_len'>len</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips/SizeStruct.html" title="Vips::SizeStruct (class)">SizeStruct</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='period'>.</span><span class='id identifier rubyid_vips_value_get_ref_string'>vips_value_get_ref_string</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_len'>len</span>

  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips.html#ARRAY_INT_TYPE-constant" title="Vips::ARRAY_INT_TYPE (constant)">ARRAY_INT_TYPE</a></span></span>
    <span class='id identifier rubyid_len'>len</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips/IntStruct.html" title="Vips::IntStruct (class)">IntStruct</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='period'>.</span><span class='id identifier rubyid_vips_value_get_array_int'>vips_value_get_array_int</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_len'>len</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_array'>array</span><span class='period'>.</span><span class='id identifier rubyid_get_array_of_int32'>get_array_of_int32</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_len'>len</span><span class='lbracket'>[</span><span class='symbol'>:value</span><span class='rbracket'>]</span>

  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips.html#ARRAY_DOUBLE_TYPE-constant" title="Vips::ARRAY_DOUBLE_TYPE (constant)">ARRAY_DOUBLE_TYPE</a></span></span>
    <span class='id identifier rubyid_len'>len</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips/IntStruct.html" title="Vips::IntStruct (class)">IntStruct</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='period'>.</span><span class='id identifier rubyid_vips_value_get_array_double'>vips_value_get_array_double</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_len'>len</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_array'>array</span><span class='period'>.</span><span class='id identifier rubyid_get_array_of_double'>get_array_of_double</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_len'>len</span><span class='lbracket'>[</span><span class='symbol'>:value</span><span class='rbracket'>]</span>

  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips.html#ARRAY_IMAGE_TYPE-constant" title="Vips::ARRAY_IMAGE_TYPE (constant)">ARRAY_IMAGE_TYPE</a></span></span>
    <span class='id identifier rubyid_len'>len</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips/IntStruct.html" title="Vips::IntStruct (class)">IntStruct</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='period'>.</span><span class='id identifier rubyid_vips_value_get_array_image'>vips_value_get_array_image</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_len'>len</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_array'>array</span><span class='period'>.</span><span class='id identifier rubyid_get_array_of_pointer'>get_array_of_pointer</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_len'>len</span><span class='lbracket'>[</span><span class='symbol'>:value</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_map!'>map!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pointer'>pointer</span><span class='op'>|</span>
      <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_object_ref'>g_object_ref</span> <span class='id identifier rubyid_pointer'>pointer</span>
      <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips/Image.html" title="Vips::Image (class)">Image</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="GObject.html#initialize-instance_method" title="GObject::GObject#initialize (method)">new</a></span></span> <span class='id identifier rubyid_pointer'>pointer</span>
    <span class='kw'>end</span>

  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips.html#BLOB_TYPE-constant" title="Vips::BLOB_TYPE (constant)">BLOB_TYPE</a></span></span>
    <span class='id identifier rubyid_len'>len</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips/SizeStruct.html" title="Vips::SizeStruct (class)">SizeStruct</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='period'>.</span><span class='id identifier rubyid_vips_value_get_blob'>vips_value_get_blob</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_len'>len</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_array'>array</span><span class='period'>.</span><span class='id identifier rubyid_get_bytes'>get_bytes</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_len'>len</span><span class='lbracket'>[</span><span class='symbol'>:value</span><span class='rbracket'>]</span>

  <span class='kw'>else</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_fundamental'>fundamental</span>
    <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../GObject.html#GFLAGS_TYPE-constant" title="GObject::GFLAGS_TYPE (constant)">GFLAGS_TYPE</a></span></span>
      <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_value_get_flags'>g_value_get_flags</span> <span class='kw'>self</span>

    <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../GObject.html#GENUM_TYPE-constant" title="GObject::GENUM_TYPE (constant)">GENUM_TYPE</a></span></span>
      <span class='id identifier rubyid_enum_value'>enum_value</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_value_get_enum'>g_value_get_enum</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="GObject::GValue (class)">GValue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_to_nick'><span class='object_link'><a href="#to_nick-class_method" title="GObject::GValue.to_nick (method)">to_nick</a></span></span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:gtype</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_enum_value'>enum_value</span>

    <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../GObject.html#GOBJECT_TYPE-constant" title="GObject::GOBJECT_TYPE (constant)">GOBJECT_TYPE</a></span></span>
      <span class='id identifier rubyid_obj'>obj</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_value_get_object'>g_value_get_object</span> <span class='kw'>self</span>
      <span class='comment'># g_value_get_object() does not add a ref ... we need to add
</span>      <span class='comment'># one to match the unref in gobject release
</span>      <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_object_ref'>g_object_ref</span> <span class='id identifier rubyid_obj'>obj</span>
      <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips/Image.html" title="Vips::Image (class)">Image</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="GObject.html#initialize-instance_method" title="GObject::GObject#initialize (method)">new</a></span></span> <span class='id identifier rubyid_obj'>obj</span>

    <span class='kw'>else</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips/Error.html" title="Vips::Error (class)">Error</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unimplemented gtype for get: </span><span class='tstring_end'>&quot;</span></span> \
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_type_name'>g_type_name</span> <span class='id identifier rubyid_gtype'>gtype</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_gtype'>gtype</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># GLib::logger.debug(&quot;GObject::GValue.get&quot;) {
</span>  <span class='comment'>#     &quot;result = #{result.inspect[0..50]}&quot;
</span>  <span class='comment'># }
</span>
  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="init-instance_method">
  
    #<strong>init</strong>(gtype)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Set the type of thing a gvalue can hold.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>gtype</span>
      
      
        <span class='type'>(<tt>GType</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the type of thing this GValue can hold.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


79
80
81</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/vips/gvalue.rb', line 79</span>

<span class='kw'>def</span> <span class='id identifier rubyid_init'>init</span> <span class='id identifier rubyid_gtype'>gtype</span>
  <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_value_init'>g_value_init</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_gtype'>gtype</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set-instance_method">
  
    #<strong>set</strong>(value)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Set the value of a GValue. The value is converted to the type of the GValue, if possible.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Any</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The value to set</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/vips/gvalue.rb', line 87</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set'>set</span> <span class='id identifier rubyid_value'>value</span>
  <span class='comment'># GLib::logger.debug(&quot;GObject::GValue.set&quot;) {
</span>  <span class='comment'>#     &quot;value = #{value.inspect[0..50]}&quot;
</span>  <span class='comment'># }
</span>
  <span class='id identifier rubyid_gtype'>gtype</span> <span class='op'>=</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:gtype</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_fundamental'>fundamental</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_type_fundamental'>g_type_fundamental</span> <span class='id identifier rubyid_gtype'>gtype</span>

  <span class='kw'>case</span> <span class='id identifier rubyid_gtype'>gtype</span>
  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../GObject.html#GBOOL_TYPE-constant" title="GObject::GBOOL_TYPE (constant)">GBOOL_TYPE</a></span></span>
    <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_value_set_boolean'>g_value_set_boolean</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span> <span class='op'>?</span> <span class='int'>1</span> <span class='op'>:</span> <span class='int'>0</span><span class='rparen'>)</span>

  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../GObject.html#GINT_TYPE-constant" title="GObject::GINT_TYPE (constant)">GINT_TYPE</a></span></span>
    <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_value_set_int'>g_value_set_int</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>

  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../GObject.html#GUINT64_TYPE-constant" title="GObject::GUINT64_TYPE (constant)">GUINT64_TYPE</a></span></span>
    <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_value_set_uint64'>g_value_set_uint64</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>

  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../GObject.html#GDOUBLE_TYPE-constant" title="GObject::GDOUBLE_TYPE (constant)">GDOUBLE_TYPE</a></span></span>
    <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_value_set_double'>g_value_set_double</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>

  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../GObject.html#GSTR_TYPE-constant" title="GObject::GSTR_TYPE (constant)">GSTR_TYPE</a></span></span>
    <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_value_set_string'>g_value_set_string</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>

  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips.html#REFSTR_TYPE-constant" title="Vips::REFSTR_TYPE (constant)">REFSTR_TYPE</a></span></span>
    <span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='period'>.</span><span class='id identifier rubyid_vips_value_set_ref_string'>vips_value_set_ref_string</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>

  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips.html#ARRAY_INT_TYPE-constant" title="Vips::ARRAY_INT_TYPE (constant)">ARRAY_INT_TYPE</a></span></span>
    <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_value'>value</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>Array</span>

    <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='period'>.</span><span class='id identifier rubyid_vips_value_set_array_int'>vips_value_set_array_int</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>
    <span class='id identifier rubyid_ptr'>ptr</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='period'>.</span><span class='id identifier rubyid_vips_value_get_array_int'>vips_value_get_array_int</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_ptr'>ptr</span><span class='period'>.</span><span class='id identifier rubyid_write_array_of_int32'>write_array_of_int32</span> <span class='id identifier rubyid_value'>value</span>

  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips.html#ARRAY_DOUBLE_TYPE-constant" title="Vips::ARRAY_DOUBLE_TYPE (constant)">ARRAY_DOUBLE_TYPE</a></span></span>
    <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_value'>value</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>Array</span>

    <span class='comment'># this will allocate an array in the gvalue
</span>    <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='period'>.</span><span class='id identifier rubyid_vips_value_set_array_double'>vips_value_set_array_double</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>

    <span class='comment'># pull the array out and fill it
</span>    <span class='id identifier rubyid_ptr'>ptr</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='period'>.</span><span class='id identifier rubyid_vips_value_get_array_double'>vips_value_get_array_double</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>nil</span>

    <span class='id identifier rubyid_ptr'>ptr</span><span class='period'>.</span><span class='id identifier rubyid_write_array_of_double'>write_array_of_double</span> <span class='id identifier rubyid_value'>value</span>

  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips.html#ARRAY_IMAGE_TYPE-constant" title="Vips::ARRAY_IMAGE_TYPE (constant)">ARRAY_IMAGE_TYPE</a></span></span>
    <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_value'>value</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>Array</span>

    <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='period'>.</span><span class='id identifier rubyid_vips_value_set_array_image'>vips_value_set_array_image</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>
    <span class='id identifier rubyid_ptr'>ptr</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='period'>.</span><span class='id identifier rubyid_vips_value_get_array_image'>vips_value_get_array_image</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_ptr'>ptr</span><span class='period'>.</span><span class='id identifier rubyid_write_array_of_pointer'>write_array_of_pointer</span> <span class='id identifier rubyid_value'>value</span>

    <span class='comment'># the gvalue needs a ref on each of the images
</span>    <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_image'>image</span><span class='op'>|</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_object_ref'>g_object_ref</span> <span class='id identifier rubyid_image'>image</span> <span class='rbrace'>}</span>

  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips.html#BLOB_TYPE-constant" title="Vips::BLOB_TYPE (constant)">BLOB_TYPE</a></span></span>
    <span class='id identifier rubyid_len'>len</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_bytesize'>bytesize</span>
    <span class='id identifier rubyid_ptr'>ptr</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../GLib.html" title="GLib (module)">GLib</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_malloc'>g_malloc</span> <span class='id identifier rubyid_len'>len</span>
    <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='period'>.</span><span class='id identifier rubyid_vips_value_set_blob'>vips_value_set_blob</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../GLib.html" title="GLib (module)">GLib</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../GLib.html#G_FREE-constant" title="GLib::G_FREE (constant)">G_FREE</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_ptr'>ptr</span><span class='comma'>,</span> <span class='id identifier rubyid_len'>len</span>
    <span class='id identifier rubyid_ptr'>ptr</span><span class='period'>.</span><span class='id identifier rubyid_write_bytes'>write_bytes</span> <span class='id identifier rubyid_value'>value</span>

  <span class='kw'>else</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_fundamental'>fundamental</span>
    <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../GObject.html#GFLAGS_TYPE-constant" title="GObject::GFLAGS_TYPE (constant)">GFLAGS_TYPE</a></span></span>
      <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_value_set_flags'>g_value_set_flags</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>

    <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../GObject.html#GENUM_TYPE-constant" title="GObject::GENUM_TYPE (constant)">GENUM_TYPE</a></span></span>
      <span class='id identifier rubyid_enum_value'>enum_value</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="GObject::GValue (class)">GValue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_nick'><span class='object_link'><a href="#from_nick-class_method" title="GObject::GValue.from_nick (method)">from_nick</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:gtype</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
      <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_value_set_enum'>g_value_set_enum</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_enum_value'>enum_value</span>

    <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../GObject.html#GOBJECT_TYPE-constant" title="GObject::GOBJECT_TYPE (constant)">GOBJECT_TYPE</a></span></span>
      <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_value_set_object'>g_value_set_object</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>

    <span class='kw'>else</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Vips/Error.html" title="Vips::Error (class)">Error</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unimplemented gtype for set: </span><span class='tstring_end'>&quot;</span></span> \
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_type_name'>g_type_name</span> <span class='id identifier rubyid_gtype'>gtype</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_gtype'>gtype</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unset-instance_method">
  
    #<strong>unset</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Clear the thing held by a GValue.</p>

<p>This happens automatically when a GValue is GCed, but this method can be handy if you need to drop a reference explicitly for some reason.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


253
254
255</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/vips/gvalue.rb', line 253</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unset'>unset</span>
  <span class='op'>::</span><span class='const'><span class='object_link'><a href="../GObject.html" title="GObject (module)">GObject</a></span></span><span class='period'>.</span><span class='id identifier rubyid_g_value_unset'>g_value_unset</span> <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Wed Aug 25 12:14:52 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.25 (ruby-2.7.2).
</div>

    </div>
  </body>
</html>