<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.25
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-ruby-vips">ruby-vips</h1>

<p><a href="https://badge.fury.io/rb/ruby-vips"><img src="https://badge.fury.io/rb/ruby-vips.svg"></a> <a href="https://github.com/libvips/ruby-vips/actions?query=workflow%3ATest"><img src="https://github.com/libvips/ruby-vips/workflows/Test/badge.svg"></a></p>

<p>This gem is a Ruby binding for the <a href="https://libvips.github.io/libvips">libvips image processing library</a>.</p>

<p>libvips is a <a href="https://github.com/libvips/libvips/wiki/Why-is-libvips-quick">demand-driven, horizontally threaded</a> image processing library. Compared to similar libraries, <a href="https://github.com/libvips/libvips/wiki/Speed-and-memory-use">libvips runs quickly and uses little memory</a>. libvips is licensed under the <a href="https://www.gnu.org/licenses/old-licenses/lgpl-2.1.en.html">LGPL 2.1+</a>.</p>

<h2 id="label-Requirements">Requirements</h2>
<ul><li>
<p>macOS, Linux, and Windows tested</p>
</li><li>
<p>libvips 8.2 or later, see the <a href="https://libvips.github.io/libvips/install.html">libvips install instructions</a></p>
</li><li>
<p><a href="https://github.com/ffi/ffi">ruby-ffi</a> 1.9 or later</p>
</li><li>
<p>Ruby 2.0+, JRuby</p>
</li></ul>

<h2 id="label-Install">Install</h2>

<p><a href="https://libvips.github.io/libvips/install.html">Install libvips</a>, then:</p>

<pre class="code ruby"><code class="ruby">$ gem install ruby-vips
</code></pre>

<p>or include it in <code>Gemfile</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ruby-vips</span><span class='tstring_end'>&quot;</span></span>
</code></pre>

<p>On Windows, you&#39;ll need to set the <code>RUBY_DLL_PATH</code> environment variable to point to the libvips bin directory.</p>

<h1 id="label-Example">Example</h1>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vips</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_im'>im</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Vips/Image.html" title="Vips::Image (class)">Image</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new_from_file'><span class='object_link'><a href="Vips/Image.html#new_from_file-class_method" title="Vips::Image.new_from_file (method)">new_from_file</a></span></span> <span class='id identifier rubyid_filename'>filename</span>

<span class='comment'># put im at position (100, 100) in a 3000 x 3000 pixel image, 
</span><span class='comment'># make the other pixels in the image by mirroring im up / down / 
</span><span class='comment'># left / right, see
</span><span class='comment'># https://libvips.github.io/libvips/API/current/libvips-conversion.html#vips-embed
</span><span class='id identifier rubyid_im'>im</span> <span class='op'>=</span> <span class='id identifier rubyid_im'>im</span><span class='period'>.</span><span class='id identifier rubyid_embed'>embed</span> <span class='int'>100</span><span class='comma'>,</span> <span class='int'>100</span><span class='comma'>,</span> <span class='int'>3000</span><span class='comma'>,</span> <span class='int'>3000</span><span class='comma'>,</span> <span class='label'>extend:</span> <span class='symbol'>:mirror</span>

<span class='comment'># multiply the green (middle) band by 2, leave the other two alone
</span><span class='id identifier rubyid_im'>im</span> <span class='op'>*=</span> <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='rbracket'>]</span>

<span class='comment'># make an image from an array constant, convolve with it
</span><span class='id identifier rubyid_mask'>mask</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Vips.html" title="Vips (module)">Vips</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Vips/Image.html" title="Vips::Image (class)">Image</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new_from_array'><span class='object_link'><a href="Vips/Image.html#new_from_array-class_method" title="Vips::Image.new_from_array (method)">new_from_array</a></span></span> <span class='lbracket'>[</span>
    <span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>16</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='int'>8</span>
<span class='id identifier rubyid_im'>im</span> <span class='op'>=</span> <span class='id identifier rubyid_im'>im</span><span class='period'>.</span><span class='id identifier rubyid_conv'>conv</span> <span class='id identifier rubyid_mask'>mask</span><span class='comma'>,</span> <span class='label'>precision:</span> <span class='symbol'>:integer</span>

<span class='comment'># finally, write the result back to a file on disk
</span><span class='id identifier rubyid_im'>im</span><span class='period'>.</span><span class='id identifier rubyid_write_to_file'>write_to_file</span> <span class='id identifier rubyid_output_filename'>output_filename</span>
</code></pre>

<p>The <code>Vips</code> section in the API docs has a <a href="https://www.rubydoc.info/gems/ruby-vips/Vips">tutorial introduction with examples</a>.</p>

<p>ruby-vips has <a href="http://www.rubydoc.info/gems/ruby-vips">API documentation</a>. The <a href="https://libvips.github.io/libvips/API/current/">libvips reference manual</a> has a  complete explanation of every method.</p>

<p>The <a href="https://github.com/libvips/ruby-vips/tree/master/example">example/</a> directory has some simple example programs.</p>

<h1 id="label-Benchmarks">Benchmarks</h1>

<p>The benchmark at <a href="https://github.com/jcupitt/vips-benchmarks">vips-benchmarks</a> loads a large image, crops, shrinks, sharpens and saves again, and repeats 10 times.</p>

<pre class="code ruby"><code class="ruby">real time in seconds, fastest of five runs
benchmark       tiff    jpeg
ruby-vips.rb	0.85	0.78	
image-magick	2.03	2.44	
rmagick.rb	3.87	3.89	

peak memory use in kb
benchmark	peak RES
ruby-vips.rb	43864
rmagick.rb	788768
</code></pre>

<p>See also <a href="https://github.com/libvips/libvips/wiki/Speed-and-memory-use">benchmarks at the official libvips website</a>.</p>
</div></div>

      <div id="footer">
  Generated on Wed Aug 25 12:14:44 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.25 (ruby-2.7.2).
</div>

    </div>
  </body>
</html>